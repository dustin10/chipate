use crate::core::memory::RAM;

const WINDOW_PIXELS_WIDTH: u8 = 64;

const WINDOW_PIXELS_HEIGHT: u8 = 32;

#[derive(Clone, Debug)]
pub struct Display {
    pixels: [u8; 256],
}

impl Display {
    pub fn new() -> Self {
        Self::default()
    }
    pub fn clear(&mut self) {
        self.pixels.fill(0);
    }
}

impl Default for Display {
    fn default() -> Self {
        Self { pixels: [0; 256] }
    }
}

const FONT_GLYPH_WIDTH: u8 = 4;

const FONT_GLYPH_HEIGHT: u8 = 5;

const FONT_START_ADDR: u16 = 0x050;

const DEFAULT_FONT_DATA: [u8; 80] = [
    0xF0, 0x90, 0x90, 0x90, 0xF0, 0x20, 0x60, 0x20, 0x20, 0x70, 0xF0, 0x10, 0xF0, 0x80, 0xF0, 0xF0,
    0x10, 0xF0, 0x10, 0xF0, 0x90, 0x90, 0xF0, 0x10, 0x10, 0xF0, 0x80, 0xF0, 0x10, 0xF0, 0xF0, 0x80,
    0xF0, 0x90, 0xF0, 0xF0, 0x10, 0x20, 0x40, 0x40, 0xF0, 0x90, 0xF0, 0x90, 0xF0, 0xF0, 0x90, 0xF0,
    0x10, 0xF0, 0xF0, 0x90, 0xF0, 0x90, 0x90, 0xE0, 0x90, 0xE0, 0x90, 0xE0, 0xF0, 0x80, 0x80, 0x80,
    0xF0, 0xE0, 0x90, 0x90, 0x90, 0xE0, 0xF0, 0x80, 0xF0, 0x80, 0xF0, 0xF0, 0x80, 0xF0, 0x80, 0x80,
];

#[derive(Clone, Debug)]
pub struct Font {
    pub name: String,
    data: [u8; 80],
}

impl Font {
    pub fn new(name: String, data: [u8; 80]) -> Self {
        Self {
            name,
            data
        }
    }
    pub fn load(&self, memory: &mut RAM) {
        memory.write_block(FONT_START_ADDR, &self.data);
    }
}

impl Default for Font {
    fn default() -> Self {
        Self::new(String::from("Default"), DEFAULT_FONT_DATA)
    }
}
